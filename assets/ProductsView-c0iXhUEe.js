import{u as x,o as s,c,a as e,t as u,n as p,b as l,w as h,d as m,F as k,r as b,e as $,f as P,g as f,h as y}from"./index-frmO0lx2.js";const C={class:"card"},w=["src"],L={class:"card-body"},S={class:"card-title"},V={class:"card-text"},B={key:0},F={key:1},I=e("br",null,null,-1),T={__name:"Card",props:{product:Object},setup(t){const d=x(),{cartLoading:n,addToCarts:a,checkIsLoadingState:r,targetProductId:o,changeTargetId:i}=d;return(v,g)=>(s(),c("div",C,[e("img",{src:t.product.imageUrl,class:"card-img-top card-img",alt:"..."},null,8,w),e("div",L,[e("h5",S,u(t.product.title),1),e("p",V,u(t.product.content),1),e("a",{href:"#",class:p(["btn btn-primary w-100",{disabled:!!(l(o).id===t.product.id&&l(r))}]),onClick:g[0]||(g[0]=h(_=>l(a)(t.product.id),["prevent"]))},[l(o).id===t.product.id&&l(r)?(s(),c("span",B,"加入中")):(s(),c("span",F,"加入購物車"))],2)]),m(" "+u(l(o))+" ",1),I,m(" "+u(t.product.id),1)]))}},j={"aria-label":"Page navigation example"},M={class:"pagination"},O={class:"page-item"},z=["onClick"],D={class:"page-item"},E={__name:"Pagination",props:{page:Object,getProducts:Function},setup(t){return(d,n)=>(s(),c("nav",j,[e("ul",M,[e("li",O,[e("a",{class:p(["page-link",{disabled:!t.page.has_pre}]),href:"#",onClick:n[0]||(n[0]=h(a=>t.getProducts(t.page.current_page-1),["prevent"]))},"<",2)]),(s(!0),c(k,null,b(t.page.total_pages,a=>(s(),c("li",{class:"page-item",key:t.page+123},[e("a",{class:p(["page-link",{active:t.page.current_page===a}]),href:"#",onClick:h(r=>t.getProducts(a),["prevent"])},u(a),11,z)]))),128)),e("li",D,[e("a",{class:p(["page-link",{disabled:!t.page.has_next}]),href:"#",onClick:n[1]||(n[1]=h(a=>t.getProducts(t.page.current_page+1),["prevent"]))},">",2)])])]))}},N=e("h2",null,"全部商品頁面",-1),U={class:"row row-cols-3"},A={__name:"ProductsView",setup(t){const d=$([]),n=$([]),a=async(r=1)=>{try{const o=`https://vue3-course-api.hexschool.io/v2/api/vue-ben0588/products?page=${r}`,i=await y.get(o),{products:v,pagination:g,success:_}=i.data;n.value=g,d.value=v,_&&(console.log("取得成功"),console.log(i))}catch(o){console.log(o)}};return P(()=>{console.log("初始化"),a()}),(r,o)=>(s(),c("div",null,[N,e("div",U,[(s(!0),c(k,null,b(d.value,i=>(s(),c("div",{class:"col",key:i.id},[f(T,{product:i},null,8,["product"])]))),128))]),f(E,{page:n.value,"get-products":a},null,8,["page"])]))}};export{A as default};
