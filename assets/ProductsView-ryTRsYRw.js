import{u as b,o as s,c as n,a as e,t as h,n as g,b as d,w as p,F as f,r as k,d as m,e as P,f as $,g as x}from"./index-Jfep3Nw1.js";const y={class:"card"},C=["src"],w={class:"card-body"},L={class:"card-title"},S={class:"card-text"},B={key:0},F={key:1},I=e("br",null,null,-1),V={__name:"Card",props:{product:Object},setup(t){const l=b(),{cartLoading:o,addToCarts:a,checkIsLoadingState:r,targetProductId:c,changeTargetId:i}=l;return(v,u)=>(s(),n("div",y,[e("img",{src:t.product.imageUrl,class:"card-img-top card-img",alt:"..."},null,8,C),e("div",w,[e("h5",L,h(t.product.title),1),e("p",S,h(t.product.content),1),e("a",{href:"#",class:g(["btn btn-primary w-100",{disabled:!!(d(c).id===t.product.id&&d(r))}]),onClick:u[0]||(u[0]=p(_=>d(a)(t.product.id),["prevent"]))},[d(c).id===t.product.id&&d(r)?(s(),n("span",B,"加入中")):(s(),n("span",F,"加入購物車"))],2)]),I]))}},j={"aria-label":"Page navigation example"},M={class:"pagination"},O={class:"page-item"},T=["onClick"],z={class:"page-item"},D={__name:"Pagination",props:{page:Object,getProducts:Function},setup(t){return(l,o)=>(s(),n("nav",j,[e("ul",M,[e("li",O,[e("a",{class:g(["page-link",{disabled:!t.page.has_pre}]),href:"#",onClick:o[0]||(o[0]=p(a=>t.getProducts(t.page.current_page-1),["prevent"]))},"<",2)]),(s(!0),n(f,null,k(t.page.total_pages,a=>(s(),n("li",{class:"page-item",key:t.page+123},[e("a",{class:g(["page-link",{active:t.page.current_page===a}]),href:"#",onClick:p(r=>t.getProducts(a),["prevent"])},h(a),11,T)]))),128)),e("li",z,[e("a",{class:g(["page-link",{disabled:!t.page.has_next}]),href:"#",onClick:o[1]||(o[1]=p(a=>t.getProducts(t.page.current_page+1),["prevent"]))},">",2)])])]))}},E=e("h2",null,"全部商品頁面",-1),U={class:"row row-cols-3"},A={__name:"ProductsView",setup(t){const l=m([]),o=m([]),a=async(r=1)=>{try{const c=`https://vue3-course-api.hexschool.io/v2/api/vue-ben0588/products?page=${r}`,i=await x.get(c),{products:v,pagination:u,success:_}=i.data;o.value=u,l.value=v,_&&(console.log("取得成功"),console.log(i))}catch(c){console.log(c)}};return P(()=>{console.log("初始化"),a()}),(r,c)=>(s(),n("div",null,[E,e("div",U,[(s(!0),n(f,null,k(l.value,i=>(s(),n("div",{class:"col",key:i.id},[$(V,{product:i},null,8,["product"])]))),128))]),$(D,{page:o.value,"get-products":a},null,8,["page"])]))}};export{A as default};
